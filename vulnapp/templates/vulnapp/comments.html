<!DOCTYPE html>
<html>
<head>
    <title>Comments - XSS Demo</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .warning { background: #f0ad4e; padding: 10px; margin: 20px 0; }
        .comment { border: 1px solid #ddd; padding: 10px; margin: 10px 0; }
        textarea { width: 100%; height: 100px; }
        button { padding: 5px 15px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Comment Board (XSS Vulnerable)</h1>
    <div class="warning">
        ⚠️ This page is vulnerable to XSS! CSRF protection is also disabled!<br>
        Try: <code>&lt;script&gt;alert('XSS Attack!')&lt;/script&gt;</code> or <code>&lt;img src=x onerror="alert('XSS')"&gt;</code>
    </div>

    <h2>Add Comment:</h2>
    <form method="POST">
        <input type="hidden" name="user_id" value="1">
        <textarea name="content" placeholder="Enter your comment (HTML/JS allowed)"></textarea>
        <button type="submit">Post Comment</button>
    </form>

    <h2>Comments:</h2>
    {% for comment in comments %}
    <div class="comment">
        <strong>User #{{ comment.user_id }}:</strong><br>
        <!-- VULNERABLE: No escaping, renders raw HTML/JavaScript -->
        {{ comment.content|safe }}
        <br><small>{{ comment.created_at }}</small>
    </div>
    {% empty %}
    <p>No comments yet.</p>
    {% endfor %}

    <p><a href="/">← Back to Home</a></p>
</body>
</html>
